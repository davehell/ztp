<!DOCTYPE html>
<html lang="cs">
<head>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>{block title}ZTP{/block}</title>
  <link href="{$basePath}/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="{$basePath}/css/screen.css">
  <link rel="stylesheet" href="{$basePath}/css/print.css" media="print">
  <link rel="shortcut icon" href="{$basePath}/favicon.ico">
  <link href='https://fonts.googleapis.com/css?family=Lato|Roboto+Slab:700&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
  {block head}{/block}
</head>

<body>
  <div class="container">
    <div class="row">
      <div class="col-sm-3" id="sidebar">
        <form id="menuForm" action="{link this}" method="get">
          <input type="hidden" name="pohled" value="{$pohled}">
          <input type="hidden" name="filtr" value="{$filtr}">

          <label>Verze:</label>
          <a n:if="$pohled == 'dev'" n:href="Verze:info, null" title="Vytvořit novou verzi" class="pull-right btn btn-primary btn-xs"><span class="glyphicon glyphicon-plus"></span></a>
          <select name="verze" id="vyberVerze">
            <option value="">--- Vyber verzi ---</option>
            <optgroup label="Bez data vydání">
            {foreach $nevydaneVerze as $v}
              <option value="{$v->id}" {if $v->id == $verzeId}selected{/if}>{$v->nazev}</option>
            {/foreach}
            </optgroup>
            <optgroup label="Vydané">
            {foreach $vydaneVerze as $v}
              <option value="{$v->id}" {if $v->id == $verzeId}selected{/if}>{$v->nazev}</option>
            {/foreach}
            </optgroup>
          </select>

          <label>Osoba:</label>
          <select name="uziv" id="vyberUzivatele">
            <option value="">--- Vyber osobu ---</option>
            {foreach $lide as $id => $jmeno}
            <option value="{$jmeno}" {if $jmeno == $uziv}selected{/if}>{$jmeno|upper}</option>
            {/foreach}
          </select>

          <label>Pohled:</label>
          <div class="btn-toolbar" id="vyberPohledu">
            <div class="btn-group btn-group-justified">
              <a n:href="this, 'pohled' => 'dev', 'filtr' => null"  title="Pohled pro vývojáře" class="btn btn-primary {if $pohled == 'dev'}active{/if}">Vývojář</a>
              <a n:href="this, 'pohled' => 'test', 'filtr' => null" title="Pohled pro testera" class="btn btn-primary {if $pohled == 'test'}active{/if}">Tester</a>
              <a n:href="this, 'pohled' => 'boss', 'filtr' => null" title="Pohled pro bosse" class="btn btn-primary {if $pohled == 'boss'}active{/if}">Boss</a>
            </div>
          </div>

          <label>Protokol:</label>
          {snippet menu}
          <ul id="vyberProtokolu">
            <li>
              <a n:href="Verze:zmeny, 'filtr' => null" title="Kompletní změnový protokol">Změnový</a>
              <div class="filtry">
                <a n:if="$autorovyZmeny !== null" n:href="Verze:zmeny, 'filtr' => 'autor'"  title="Změny autora {$uziv|upper}" class="btn btn-primary btn-xs"><span class="glyphicon glyphicon-user"></span> {$autorovyZmeny}</a>
              </div>
            </li>
            <li>
              <a n:href="Verze:testy, 'filtr' => null" title="Kompletní testovací protokol">Testovací</a>
              <div class="filtry">
                {if $pohled == 'dev'}
                  <a n:href="Verze:testy, 'filtr' => 'autor'" n:if="$uziv" title="Změny autora {$uziv|upper}" class="btn btn-primary btn-xs"><span class="glyphicon glyphicon-user"></span> {$autorovyZmeny}</a>
                  <a n:href="Verze:testy, 'filtr' => 'autor-chyby'" n:if="$neotestovaneZmeny !== null" title="Změny autora {$uziv|upper}, které neprošly testováním" class="btn btn-primary btn-xs"><span class="glyphicon glyphicon-remove"></span> {$neotestovaneZmeny}</a>
                {/if}
                {if $pohled == 'test'}
                  <a n:href="Verze:testy, 'filtr' => 'tester'" n:if="$uziv" title="Změny, které testuje {$uziv|upper}" class="btn btn-primary btn-xs"><span class="glyphicon glyphicon-user"></span> {$testerovyZmeny}</a>
                  <a n:href="Verze:testy, 'filtr' => 'tester-chyby'" n:if="$neotestovaneZmeny !== null" title="Změny, které neprošly testováním a testuje je {$uziv|upper}" class="btn btn-primary btn-xs"><span ><span class="glyphicon glyphicon-remove"></span> {$neotestovaneZmeny}</a>
                {/if}
                {if $pohled == 'boss'}
                  <a n:href="Verze:testy, 'filtr' => 'bez-testera'" n:if="$zmenyBezTestera !== null" title="Změny, které nemají přiřazeného testera" class="btn btn-primary btn-xs"><span class="glyphicon glyphicon-asterisk"></span> {$zmenyBezTestera}</a>
                  <a n:href="Verze:testy, 'filtr' => 'boss-chyby'" n:if="$neotestovaneZmeny !== null" title="Změny, které neprošly testováním" class="btn btn-primary btn-xs"><span class="glyphicon glyphicon-remove"></span> {$neotestovaneZmeny}</a>
                {/if}
              </div>
            </li>
          </ul>
          {/snippet}
        </form>
      </div> <!-- #sidebar -->
      <div class="col-sm-9" id="main">
        <div n:foreach="$flashes as $flash" class="alert alert-{$flash->type}">{$flash->message}</div>
        {include content}
      </div> <!-- #main -->
    </div> <!-- .row -->
  </div> <!-- .container -->

  {block scripts}
  <script src="{$basePath}/js/jquery.js"></script>
  <script src="{$basePath}/js/nette.ajax.js"></script>
  <script src="{$basePath}/js/bootstrap.min.js"></script>
  <script src="{$basePath}/js/netteForms.js"></script>
  <script src="{$basePath}/js/main.js"></script>
  {/block}
</body>
</html>
