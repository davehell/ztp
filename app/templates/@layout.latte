<!DOCTYPE html>
<html lang="cs">
<head>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>{block title}ZTP{/block}</title>
  <link href="{$basePath}/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="{$basePath}/css/screen.css">
  <link rel="shortcut icon" href="{$basePath}/favicon.ico">
  <link href='https://fonts.googleapis.com/css?family=Lato|Roboto+Slab:700&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
  {block head}{/block}
</head>

<body>
  <div class="container">
    <div class="row">
      <div class="col-sm-3" id="sidebar">

        <form id="menuForm" action="{ifCurrent Verze:zmeny}{link Verze:zmeny}{else}{link Verze:testy}{/ifCurrent}" method="get">
        Verze: <a n:if="$pohled == 'dev'" n:href="Verze:info, null" title="Vytvořit novou verzi" class="pull-right btn btn-success btn-xs"><span class="glyphicon glyphicon-plus"></span></a>
        <select name="verze" id="vyberVerze">
          <option value="">--- Vyber verzi ---</option>
          <optgroup label="Bez data vydání">
          {foreach $nevydaneVerze as $v}
            <option value="{$v->id}" {if $v->id == $verzeId}selected{/if}>{$v->nazev}</option>
          {/foreach}
          </optgroup>
          <optgroup label="Vydané">
          {foreach $vydaneVerze as $v}
            <option value="{$v->id}" {if $v->id == $verzeId}selected{/if}>{$v->nazev}</option>
          {/foreach}
          </optgroup>
        </select>

        {if $verzeId}
          Pohled:
          <select name="pohled" id="vyberPohledu">
            <option value="dev" {if $pohled == 'dev'}selected{/if}>Vývojář</option>
            <option value="test" {if $pohled == 'test'}selected{/if}>Tester</option>
            <option value="boss" {if $pohled == 'boss'}selected{/if}>Boss</option>
          </select>

          Osoba:
          <select name="uziv" id="vyberUzivatele">
            <option value="">--- Vyber osobu ---</option>
            {foreach $lide as $id => $jmeno}
            <option value="{$jmeno}" {if $jmeno == $uziv}selected{/if}>{$jmeno|upper}</option>
            {/foreach}
          </select>
          </form>

          Protokol:
          {snippet menu}
          <ul>
            <li>
              <a n:href="Verze:zmeny, 'filtr' => null" title="Zobrazit změnový protokol">Změnový</a>
              <div class="labels">
                <a n:if="$autorovyZmeny !== null" n:href="Verze:zmeny, 'filtr' => 'autor'"><span class="label label-info" title="Změny autora {$uziv|upper}"><span class="glyphicon glyphicon-user"></span> {$autorovyZmeny}</span></a>
              </div>
            </li>
            <li>
              <a n:href="Verze:testy, 'filtr' => null" title="Zobrazit testovací protokol">Testovací</a>
              <div class="labels">
                {if $pohled == 'dev'}
                  <a n:href="Verze:testy, 'filtr' => 'autor'" n:if="$uziv"><span class="label label-info" title="Změny autora {$uziv|upper}"><span class="glyphicon glyphicon-user"></span> {$autorovyZmeny}</span></a>
                  <a n:href="Verze:testy, 'filtr' => 'autor-chyby'" n:if="$neotestovaneZmeny !== null"><span class="label label-info" title="Změny autora {$uziv|upper}, které neprošly testováním"><span class="glyphicon glyphicon-remove"></span> {$neotestovaneZmeny}</span></a>
                {/if}
                {if $pohled == 'test'}
                  <a n:href="Verze:testy, 'filtr' => 'tester'" n:if="$uziv"><span class="label label-info" title="Změny, které testuje {$uziv|upper}"><span class="glyphicon glyphicon-user"></span> {$testerovyZmeny}</span></a>
                  <a n:href="Verze:testy, 'filtr' => 'tester-chyby'" n:if="$neotestovaneZmeny !== null"><span class="label label-info" title="Změny, které neprošly testováním a testuje je {$uziv|upper}"><span class="glyphicon glyphicon-remove"></span> {$neotestovaneZmeny}</span></a>
                {/if}
                {if $pohled == 'boss'}
                  <a n:href="Verze:testy, 'filtr' => 'bez-testera'" n:if="$zmenyBezTestera !== null"><span class="label label-info" title="Změny, které nemají přiřazeného testera"><span class="glyphicon glyphicon-asterisk"></span> {$zmenyBezTestera}</span></a>
                  <a n:href="Verze:testy, 'filtr' => 'boss-chyby'" n:if="$neotestovaneZmeny !== null" ><span class="label label-info" title="Změny, které neprošly testováním"><span class="glyphicon glyphicon-remove"></span> {$neotestovaneZmeny}</span></a>
                {/if}
              </div>
            </li>
          </ul>
          {/snippet}
        {/if}
      </div> <!-- #sidebar -->
      <div class="col-sm-9" id="main">
        <div n:foreach="$flashes as $flash" class="alert alert-{$flash->type}">{$flash->message}</div>
        {include content}
      </div> <!-- #main -->
    </div> <!-- .row -->
  </div> <!-- .container -->

  {block scripts}
  <script src="{$basePath}/js/jquery.js"></script>
  <script src="{$basePath}/js/nette.ajax.js"></script>
  <script src="{$basePath}/js/bootstrap.min.js"></script>
  <script src="{$basePath}/js/netteForms.js"></script>
  <script src="{$basePath}/js/main.js"></script>
  {/block}
</body>
</html>
